{% extends 'base.html' %}

{% block content %}
<h4>{{ user.username }} orders:</h4>
<ul class="list-group">
    {% for order in orders %}
    {% if order.orderitem_set.exists %}
        <li class="list-group-item d-flex justify-content-between align-items-center" style="margin-top: 10px">
            <span><strong>{{ order.time|date:"m-d H:i" }}</strong>
            {% for item in order.orderitem_set.all %}
                    {% if item.menu_item %}
                        {{ item.menu_item.name }} x{{ item.quantity }}{% if not forloop.last %}, {% endif %}
                    {% elif item.custom_burger %}
                        {{ item.custom_burger.name }} x{{ item.quantity }}{% if not forloop.last %}, {% endif %}
                    {% endif %}

                {% empty %}
                    No items in this order.

                {% endfor %}

            </span>

            <span>
                {{ order.total_price }}eur, <strong>status:</strong> {{ order.get_order_status_display }}
                {% if order.order_status == 'd' and order.orderitem_set.exists %}
                    <a href="{% url 'burger_shop:order_detail' order.id %}" class="btn btn-primary btn-sm">Continue Order</a>
                {% endif %}
            </span>
        </li>
    {% endif %}
    {% empty %}
        <li class="list-group-item">Your order is empty.</li>
    {% endfor %}
</ul>

{% endblock %}